{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport { ref, onMounted, onUnmounted, computed } from \"vue\";\nimport { filter } from \"../utils/todoStorage\";\nvar validHash = [\"all\", \"active\", \"completed\"];\nexport default function useFilter(todosRef) {\n  var visibilityRef = ref(\"all\");\n  var onHashChange = function onHashChange() {\n    var hash = localtion.hash.replace(/#\\/?/, \"\");\n    if (visibilityRef.includes(hash)) {\n      // 有效的S\n      visibilityRef.value = hash;\n    } else {\n      // 无效的\n      localtion.hash = \"\";\n      visibilityRef.value = \"all\";\n    }\n  };\n  // 1. 组件挂载完成的生命周期函数\n  onMounted(function () {\n    window.addEventListener(\"hashchange\", onHashChange);\n  });\n\n  // 2. 组件销毁过后的生命周期函数\n  onUnmounted(function () {\n    window.addEventListener(\"hashchange\", onHashChange);\n  });\n  var filteredTodosRef = computed(function () {\n    return filter(todosRef.value, visibilityRef.value);\n  });\n  var remainingRef = computed(function () {\n    return filter(todosRef.value, \"active\").length;\n  });\n  var completedRef = computed(function () {\n    return filter(todosRef.value, \"completed\").length;\n  });\n  return {\n    visibilityRef: visibilityRef,\n    filteredTodosRef: filteredTodosRef,\n    remainingRef: remainingRef,\n    completedRef: completedRef\n  };\n}","map":{"version":3,"names":["ref","onMounted","onUnmounted","computed","filter","validHash","useFilter","todosRef","visibilityRef","onHashChange","hash","localtion","replace","includes","value","window","addEventListener","filteredTodosRef","remainingRef","length","completedRef"],"sources":["/Users/apple/Desktop/todo-mvc/src/composition/useFilter.js"],"sourcesContent":["import { ref, onMounted, onUnmounted, computed } from \"vue\";\nimport { filter } from \"../utils/todoStorage\";\n\nconst validHash = [\"all\", \"active\", \"completed\"];\n\nexport default function useFilter(todosRef) {\n  const visibilityRef = ref(\"all\");\n\n  const onHashChange = () => {\n    const hash = localtion.hash.replace(/#\\/?/, \"\");\n\n    if (visibilityRef.includes(hash)) {\n      // 有效的S\n      visibilityRef.value = hash;\n    } else {\n      // 无效的\n      localtion.hash = \"\";\n      visibilityRef.value = \"all\";\n    }\n  };\n  // 1. 组件挂载完成的生命周期函数\n  onMounted(() => {\n    window.addEventListener(\"hashchange\", onHashChange);\n  });\n\n  // 2. 组件销毁过后的生命周期函数\n  onUnmounted(() => {\n    window.addEventListener(\"hashchange\", onHashChange);\n  });\n\n  const filteredTodosRef = computed(() => {\n    return filter(todosRef.value, visibilityRef.value);\n  });\n\n  const remainingRef = computed(() => {\n    return filter(todosRef.value, \"active\").length;\n  });\n\n  const completedRef = computed(() => {\n    return filter(todosRef.value, \"completed\").length;\n  });\n\n  return {\n    visibilityRef,\n    filteredTodosRef,\n    remainingRef,\n    completedRef,\n  };\n}\n"],"mappings":";;;;AAAA,SAASA,GAAG,EAAEC,SAAS,EAAEC,WAAW,EAAEC,QAAQ,QAAQ,KAAK;AAC3D,SAASC,MAAM,QAAQ,sBAAsB;AAE7C,IAAMC,SAAS,GAAG,CAAC,KAAK,EAAE,QAAQ,EAAE,WAAW,CAAC;AAEhD,eAAe,SAASC,SAASA,CAACC,QAAQ,EAAE;EAC1C,IAAMC,aAAa,GAAGR,GAAG,CAAC,KAAK,CAAC;EAEhC,IAAMS,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;IACzB,IAAMC,IAAI,GAAGC,SAAS,CAACD,IAAI,CAACE,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;IAE/C,IAAIJ,aAAa,CAACK,QAAQ,CAACH,IAAI,CAAC,EAAE;MAChC;MACAF,aAAa,CAACM,KAAK,GAAGJ,IAAI;IAC5B,CAAC,MAAM;MACL;MACAC,SAAS,CAACD,IAAI,GAAG,EAAE;MACnBF,aAAa,CAACM,KAAK,GAAG,KAAK;IAC7B;EACF,CAAC;EACD;EACAb,SAAS,CAAC,YAAM;IACdc,MAAM,CAACC,gBAAgB,CAAC,YAAY,EAAEP,YAAY,CAAC;EACrD,CAAC,CAAC;;EAEF;EACAP,WAAW,CAAC,YAAM;IAChBa,MAAM,CAACC,gBAAgB,CAAC,YAAY,EAAEP,YAAY,CAAC;EACrD,CAAC,CAAC;EAEF,IAAMQ,gBAAgB,GAAGd,QAAQ,CAAC,YAAM;IACtC,OAAOC,MAAM,CAACG,QAAQ,CAACO,KAAK,EAAEN,aAAa,CAACM,KAAK,CAAC;EACpD,CAAC,CAAC;EAEF,IAAMI,YAAY,GAAGf,QAAQ,CAAC,YAAM;IAClC,OAAOC,MAAM,CAACG,QAAQ,CAACO,KAAK,EAAE,QAAQ,CAAC,CAACK,MAAM;EAChD,CAAC,CAAC;EAEF,IAAMC,YAAY,GAAGjB,QAAQ,CAAC,YAAM;IAClC,OAAOC,MAAM,CAACG,QAAQ,CAACO,KAAK,EAAE,WAAW,CAAC,CAACK,MAAM;EACnD,CAAC,CAAC;EAEF,OAAO;IACLX,aAAa,EAAbA,aAAa;IACbS,gBAAgB,EAAhBA,gBAAgB;IAChBC,YAAY,EAAZA,YAAY;IACZE,YAAY,EAAZA;EACF,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}